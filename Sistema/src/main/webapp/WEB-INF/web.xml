<?xml version="1.0" encoding="UTF-8"?>
<web-app version="4.0" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd">
    <display-name>Sistema</display-name>
    <listener>
        <description>ServletContextListener</description>
        <listener-class>application.NavigazioneControl.NewServletListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>GestioneCarrelloController</servlet-name>
        <servlet-class>application.GestioneCarrelloControl.GestioneCarrelloController</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>UpdateProfileController</servlet-name>
        <servlet-class>application.AutenticazioneControl.UpdateProfileController</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>UpdateAddressController</servlet-name>
        <servlet-class>application.AutenticazioneControl.UpdateAddressController</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ImageServlet</servlet-name>
        <servlet-class>application.NavigazioneControl.ImageServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>GestioneWishlistController</servlet-name>
        <servlet-class>application.GestioneWishlistControl.GestioneWishlistController</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>AreaRiservata</servlet-name>
        <servlet-class>application.AutenticazioneControl.AreaRiservata</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Wishlist</servlet-name>
        <servlet-class>application.GestioneWishlistControl.Wishlist</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ResultsPage</servlet-name>
        <servlet-class>application.NavigazioneControl.ResultsPage</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>GestioneApprovigionamentiController</servlet-name>
        <servlet-class>application.GestioneApprovigionamentiControl.GestioneApprovigionamentiController</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Approvigionamento</servlet-name>
        <servlet-class>application.GestioneApprovigionamentiControl.Approvigionamento</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>UpdateUserInfo</servlet-name>
        <servlet-class>application.AutenticazioneControl.UpdateUserInfo</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ProductInfos</servlet-name>
        <servlet-class>application.NavigazioneControl.ProductInfos</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ModifyProductsInCatalog</servlet-name>
        <servlet-class>application.GestioneCatalogoControl.ModifyProductsInCatalog</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>FetchSessionData</servlet-name>
        <servlet-class>application.GestioneCatalogoControl.FetchSessionData</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>GestioneCarrelloController</servlet-name>
        <url-pattern>/GestioneCarrelloController</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>UpdateProfileController</servlet-name>
        <url-pattern>/UpdateProfileController</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>UpdateAddressController</servlet-name>
        <url-pattern>/UpdateAddressController</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ImageServlet</servlet-name>
        <url-pattern>/image</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>ImageUpdater</servlet-name>
        <servlet-class>application.GestioneCatalogoControl.ImageUpdater</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ImageUpdater</servlet-name>
        <url-pattern>/ImageUpdater</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>GestioneWishlistController</servlet-name>
        <url-pattern>/GestioneWishlistController</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>AreaRiservata</servlet-name>
        <url-pattern>/AreaRiservata</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Wishlist</servlet-name>
        <url-pattern>/Wishlist</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ResultsPage</servlet-name>
        <url-pattern>/ResultsPage</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>GestioneApprovigionamentiController</servlet-name>
        <url-pattern>/GestioneApprovigionamentiController</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Approvigionamento</servlet-name>
        <url-pattern>/Approvigionamento</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>UpdateUserInfo</servlet-name>
        <url-pattern>/UpdateUserInfo</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ProductInfos</servlet-name>
        <url-pattern>/ProductInfos</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ModifyProductsInCatalog</servlet-name>
        <url-pattern>/ModifyProductsInCatalog</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>FetchSessionData</servlet-name>
        <url-pattern>/FetchSessionData</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>RegistrazioneController</servlet-name>
        <servlet-class>application.RegistrazioneControl.RegistrazioneController</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>AutenticazioneController</servlet-name>
        <servlet-class>application.AutenticazioneControl.AutenticazioneController</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>MenuNavigazioneController</servlet-name>
        <servlet-class>application.NavigazioneControl.MenuNavigazioneController</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>GestioneOrdiniController</servlet-name>
        <servlet-class>application.GestioneOrdiniControl.GestioneOrdiniController</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>RegistrazioneController</servlet-name>
        <url-pattern>/RegistrazioneController</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>AutenticazioneController</servlet-name>
        <url-pattern>/AutenticazioneController</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>GestioneOrdiniController</servlet-name>
        <url-pattern>/GestioneOrdiniController</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>NavigazioneController</servlet-name>
        <servlet-class>application.NavigazioneControl.NavigazioneController</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>NavigazioneController</servlet-name>
        <url-pattern>/NavigazioneController</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>NavigazioneController</servlet-name>
        <url-pattern>/TechHeaven</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>GestioneCatalogoController</servlet-name>
        <servlet-class>application.GestioneCatalogoControl.GestioneCatalogoController</servlet-class>
        <multipart-config>
            <max-file-size>5242880</max-file-size>
            <!-- 5 MB -->
            <max-request-size>10485760</max-request-size>
            <!-- 10 MB -->
            <file-size-threshold>1048576</file-size-threshold>
            <!-- 1 MB -->
        </multipart-config>
    </servlet>
    <resource-ref>
        <res-ref-name>jdbc/techheaven</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
    <filter>
        <filter-name>RoleAccessFilter</filter-name>
        <filter-class>application.AutenticazioneControl.RoleAccessFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/GestioneCatalogo</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/protected/gestoreCatalogo/GestioneCatalogo.jsp</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/protected/gestoreCatalogo/UpdateProductInfos.jsp</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/UpdateProductInfos</url-pattern>
    </filter-mapping>
    <!--Gestore Ordini Filtro Pattern Url  -->
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/GestioneOrdini</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/protected/gestoreOrdini/GestioneOrdini.jsp</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/protected/gestoreOrdini/approvigionamento.jsp</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/protected/gestoreOrdini/fill_order_details.jsp</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/protected/gestoreOrdini/richiesteApprovigionamento.jsp</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/fill_order_details</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>RoleAccessFilter</filter-name>
        <url-pattern>/GestioneApprovigionamentiController</url-pattern>
    </filter-mapping>
    <!-- Fine Gestore Ordini Filtro Pattern Url  -->
    <!-- Lista .jsp Pagine Percorso + Mapping -->
    <servlet>
        <servlet-name>resetPasswordServlet</servlet-name>
        <jsp-file>/resetPassword.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>resetPasswordServlet</servlet-name>
        <url-pattern>/resetPassword</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>AutenticazioneServlet</servlet-name>
        <jsp-file>/Autenticazione.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>AutenticazioneServlet</servlet-name>
        <url-pattern>/Autenticazione</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>cartServlet</servlet-name>
        <jsp-file>/cart.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>cartServlet</servlet-name>
        <url-pattern>/cart</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>RegistrazioneServlet</servlet-name>
        <jsp-file>/Registrazione.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>RegistrazioneServlet</servlet-name>
        <url-pattern>/Registrazione</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>GestioneOrdiniServlet</servlet-name>
        <jsp-file>/protected/gestoreOrdini/GestioneOrdini.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>GestioneOrdiniServlet</servlet-name>
        <url-pattern>/GestioneOrdini</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>fill_order_detailsServlet</servlet-name>
        <jsp-file>/protected/gestoreOrdini/fill_order_details.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>fill_order_detailsServlet</servlet-name>
        <url-pattern>/fill_order_details</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>GestioneCatalogoServlet</servlet-name>
        <jsp-file>/protected/gestoreCatalogo/GestioneCatalogo.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>GestioneCatalogoServlet</servlet-name>
        <url-pattern>/GestioneCatalogo</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>ModifyProductServlet</servlet-name>
        <jsp-file>/protected/gestoreCatalogo/UpdateProductInfos.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>ModifyProductServlet</servlet-name>
        <url-pattern>/UpdateProductInfos</url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>UnauthourizedServlet</servlet-name>
        <jsp-file>/Unauthourized.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>UnauthourizedServlet</servlet-name>
        <url-pattern>/Unauthourized</url-pattern>
    </servlet-mapping>
    <!-- Impedire l'accesso a pagine web del sito con una normale connessione HTTP -->
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>All</web-resource-name>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
    <!-- XSS e Clickjacking-->
    <filter>
        <filter-name>httpHeaderSecurity</filter-name>
        <filter-class>org.apache.catalina.filters.HttpHeaderSecurityFilter</filter-class>
        <init-param>
            <param-name>xssProtectionEnabled</param-name>
            <param-value>true</param-value>
        </init-param>
        <init-param>
            <param-name>antiClickJackingEnabled</param-name>
            <param-value> true </param-value>
        </init-param>
        <init-param>
            <param-name>antiClickJackingOption</param-name>
            <param-value> DENY </param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>httpHeaderSecurity</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app>
